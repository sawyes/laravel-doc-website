<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="assets/ico/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="@summer">
    <title>Linux 常用命令</title>
    <meta name="description" content="Laravel 5.1 LTS 速查表方便快速浏览，支持并且只支持 Laravel 5.1 LTS，支持手机访问，支持中英文版本">
    <meta name="keywords" content="linux 学习笔记">
    <link rel="stylesheet" href="assets/css2/normalize.css" />
    <link rel="stylesheet" href="assets/css2/foundation.min.css" />
    <link rel="stylesheet" href="assets/css2/font-awesome.min.css" />
    <link rel="stylesheet" href="assets/css2/page.css" />
    <style>
        .code-column h6 {
          color: #3adb76;
        }
    </style>
</head>
<body>

<div class="off-canvas-wrapper wrapper-container">
    <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

        <div class="off-canvas position-left sidebar-canvas" id="offCanvasLeft" data-off-canvas data-position="left">
            <button class="close-button" aria-label="Close menu" type="button" data-close>
                <span aria-hidden="true">&times;</span>
            </button>
            <ul class="mobile-ofc vertical menu">
                <li>
                    <button class="warning hollow button check-all-button">查看全部</button>
                </li>
                <li>
                    <ul class="submenu menu vertical mobile-cmd-cell" data-submenu>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="off-canvas-content" data-off-canvas-content>
            <div class="title-bar hide-for-medium">
                <div class="title-bar-left">
                    <button class="menu-icon" type="button" data-open="offCanvasLeft"></button>
                </div>
            </div>
        </div>

        <a href="#top" id="top-button" title="Top"><i class="icon-arrow-up"></i></a>
        <a href="#" class="comments-toggle" title="隐藏/展示代码注释"><i class="icon-eye-close"></i></a>

        <div class="row full-width">

            <div class="large-2 columns code-column sidebar">
                <h5 class="sidebar-title">Linux 常用命令</h5>
                <hr class="horizonal-line">
                <div class="show-for-medium">
                    <button class="warning hollow button check-all-button">查看全部</button>

                    <div class="clearfix"></div>
                    <ul class="sidebar-menu">
                    </ul>

                    <div class="clearfix"></div>

                    <hr class="horizonal-line">
                </div>
                <ul class="sidebar-bottom">
                    <li><a href="https://www.kernel.org/" class="button expand small radius alert">Linux Kernel</a></li>
                </ul>
            </div>
            <div class="large-10 columns code-column code-container">
                <div class="grid">
<!--                    
<section class="cmd-description grid-item">
<h4><a name="模板" href="#模板">模板</a>
<a target='_blank' href="" title="模板"><i class="icon-file-text"></i></a></h4>

<pre class="prettyprint lang-shell">

</pre>

<h6>模板2 <a target='_blank' href="" title="模板2"><i class="icon-file-text"></i></a></h6>
<pre class="prettyprint lang-shell">
</pre>
</section>
-->
<section class="cmd-description grid-item">
<h4><a name="目录管理" href="#目录管理">目录管理</a>
<h6>查看ls</h6>
<pre class="prettyprint lang-php">
蓝色表示目录；
绿色表示可执行文件；
红色表示压缩文件；
浅蓝色表示链接文件；
白色表示其他文件；
黄色是设备文件，包括block, char, fifo。

-：普通文件 (f)
d: 目录文件
b: 块设备文件 (block)
c: 字符设备文件 (character)
l: 符号链接文件(symbolic link file)
p: 命令管道文件(pipe)
s: 套接字文件(socket)

//list命令
ls -al
// drwxrwxr-x 993 vagrant vagrant 36864 Aug 16 17:03 .npm

type ls
//ls is aliased to `ls --color=auto'
type ll
//ll is aliased to `ls -l --color=auto'
// 用人类能理解的方式输出大小 -h 好多命令都有， 注意大小变为36K
ls -alh
// drwxrwxr-x 993 vagrant vagrant  36K Aug 16 17:03 .npm
</pre>
<h6>mkdir</h6>
<pre>
-p parent
-v 详细过程
// 命令行展开
mkdir -pv /mnt/test/{x/m,y}    
</pre>

<h6>tree</h6>
<pre class="prettyprint lang-php">
// 可能需要自行安装
// ubuntu
sudo apt-get install tree
// centos
rpm -qa tree
mkdir /mnt/cdrom
mount /dev/cdrom /mnt/cdrom
rpm -ivh tree-1.5.3-2.el6.i686.rpm
//查看目录结构
tree test
test
├── ac
├── ad
├── bc
└── bd
</pre>

</section>

<section class="cmd-description grid-item">
    <h4><a name="文件管理" href="#文件管理">文件管理</a></h4>

<h6>cp复制</h6>
<pre class="prettyprint lang-php">
cp SRC DEST
-r 递归
-i 覆盖是询问
-f 强制
-a(archive 啊k爱)：归档复制，常用于备份
-L always follow symbolic links in SOURCE
-P never follow symbolic links in SOURCE

// 归档备份, 属性，软连接等全部保留
cp -a /etc /backup/etc-2013-02-28
</pre>
<h6>touch创建文件</h6>
<pre class="prettyprint lang-php">
// 变更文件的变更时间
touch -mt 201701011248 filename
// 其他参数
-a access time
-t time string 
-m modify time
-c change time
</pre>
<h6>rm删除文件</h6>
<pre class="prettyprint lang-php">
// redhat中默认是别名，只有root用户是这样
type rm
//rm is aliased to `rm -i'， -i 交互式
// 忽略别名运行命令本身
\rm -fr 1.txt
// 删除文件：rm
  -i  交互
  -f  不用咨询，强制删除
  -r -R 都是递归
rm -fr 1.txt
</pre>
    <h6>stat</h6>
<pre class="prettyprint lang-php">
stat filename 
  File: "filename"
  Size: 1965        Blocks: 8          IO Block: 4096   普通文件
Device: fd00h/64768d    Inode: 654681      Links: 1
Access: (0755/-rwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2017-10-27 00:15:26.236270025 +0800
Modify: 2017-10-27 00:15:26.236270025 +0800
Change: 2017-10-27 00:15:26.236270025 +0800
</pre>
</section>

<section class="cmd-description grid-item">
    <h4><a name="环境变量" href="#环境变量">环境变量</a></h4>
    <pre class="prettyprint lang-shell">
// 输出环境变量
printenv
// 更新环境变量, 可以解决man 乱码问题
export LANG=en
    </pre>
<h6>hash o(1)<a target='_blank' href="http://blog.csdn.net/wendavidoi/article/details/50670016" title="Artisan CLI @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
<pre>
// 查看命令的命中率
    hash
</pre>
</section>

<section class="cmd-description grid-item">
<h4><a name="快捷键" href="#快捷键">快捷键</a></h4>
<h6>文本查找</h6>
<pre class="prettyprint lang-php">
//man,vim中
/KEYWORD: 向后
n: 下一个
N：前一个 
?KEYWORD：向前
n: 下一个
N：前一个

</pre>
<h6>X window中翻屏(黑窗口)</h6>
<pre>
shift + pageup
shift + pagedown
</pre>
</section>

<section class="cmd-description grid-item">
    <h4><a name="date" href="#date">date</a></h4>
    <h6>date 系统时间管理</h6>
<pre class="prettyprint lang-php">
// RTC real time clock 实时时钟
// UTC 时间
 date -u +'%F %T'
// 日期转成时间戳 输出1508867210
date -d '2017-10-25 01:46:50' +%s
// 手动设置系统时间
date -s '2017-10-25 01:46:50'
</pre>
    <h6>hwclock 时间校准</h6>
<p>硬件时钟 clock  由电池纽扣控制</p>
<p>系统时钟 date   由系统控制， 但是CPU可能繁忙导致时间出错</p>
<pre class="prettyprint lang-php">
hwclock -w
// Set the System Time from the Hardware Clock
hwclock -s
// Set the Hardware Clock to the current System Time
</pre>
    <h6>cal日历</h6>
<pre class="prettyprint lang-php">
cal
cal 2012
cal 02 2012
</pre>
</section>

<section class="cmd-description grid-item">
    <h4><a name="alias" href="#alias">alias</a></h4>

<pre class="prettyprint lang-php">
永久生效 vim ~/.bashrc
// alias 是bash命令，只在bash生命周期内有效
// 临时别名，存储当前会话
alias etc='cd /etc'
// 永久写入文件
vim ~/.bashrc
// 立刻生效
source ~/.bash
// 查看所有命令
alias
</pre>
</section>

<section class="cmd-description grid-item">
    <h4><a name="文本处理" href="#文本处理">文本处理</a></h4>
    <h6>printf</h6>
<pre class="prettyprint lang-php">
printf "hello, %s\r\n" world
//hello, world
printf "float %.2f\r\n" 1.11911
//float 1.12
</pre>
<h6>tr</h6>
<pre>
// 默认为交互式，同时出现 ab转换AB
tr 'ab' 'AB'
// 结合重定向, 逐个字符比较，替换为大写
tr 'a-z' 'A-Z' < /etc/passwd
// 出现字符a或者b都会删除
tr -d 'ab'
</pre>
</section>

<section class="cmd-description grid-item">
    <h4><a name="查看文本" href="#查看文本">查看文本</a></h4>
<h6>cat、tac、more、less、head、tail</h6>
    <h6>cat || tac</h6>
<pre class="prettyprint lang-php">
-n 行号
-E 显示结束符
-a 显示特殊符号

// 可以连接多个文件
cat 1.txt 2.txt

// 和egrep结合，过滤空行和#开头的字符
// 理解^$为什么是空行？因为linux空行就是只有一个$结束符号，用-E命令可以理解
cat httpd.conf | egrep -v '^$|#'
</pre>
<h6>more 翻屏</h6>
<pre>
backspace 向后一页
b 向前一页
</pre>
<h6>less 用得最多</h6>
<pre>
// 支持搜索，翻到最后不退出， man命令就是less打开的
backspace 向后一页
b 向前一页
</pre>
<h6>tail | head</h6>
<pre>
-n 显示多少行  
tail -f: 查看文件尾部，不退出，等待显示后续追加至此文件的新内容；  
</pre>
<h6>cut</h6>
<pre>
-d delimiter 分隔符,默认为空格
-f field 制定要显示字段
// 冒号作为分隔符，截取第一个字段
cut -d : -f 1 /etc/passwd
// -f1,3  显示1,3字段
// -f1-3  显示1到3个字段
</pre>
<h6>sort</h6>
<pre>
// 默认ascii字符排序
-r 逆序
-n 按数值大小排序  
-t, --field-separator=SEP字段分隔符
-k key=pos1,pos2第几个位置作为排序依据
-u uniq 去重
-f 排序忽略字符大小写
// :分割passwd , 以第三个字段逆序输出
sort -t: -k3 -r /etc/passwd
// 按照文件大小排序
ll -h| sort -nk5
</pre>
<h6>uniq</h6>
<pre>
//相邻重复的行才认为是重复的行
-c 重复的次数
-d 只显示重复的行，去重后的值
-D  显示重复的行的所有内容
</pre>
<h6>wc</h6>
<pre>
// word count, 默认显示格式
行 单词数 字节数    
-c, --bytes 输出字节数统计
-m, --chars 输出字符数统计
-l, --lines 输出行数统计
</pre>
</section>
<section class="cmd-description grid-item">
    <h4><a name="查看版本" href="#查看版本">查看版本</a></h4>
    <h6></h6>
<pre class="prettyprint lang-php">
lsb_release
cat /etc/lsb-release
cat /etc/issue
cat /proc/version
uname -a
</pre>
</section>
<section class="cmd-description grid-item">
    <h4><a name="bash" href="#bash">bash</a></h4>
    <h6>bash特性</h6>
<pre class="prettyprint lang-php">
1、命令历史、命令补全
2、管道、重定向
3、命令别名
4、命令行编辑
5、命令行展开
6、文件名通配
7、变量
8、编程
</pre>
<h6>光标跳转：</h6>
<pre>
Ctrl+a：跳到命令行首
Ctrl+e：跳到命令行尾
Ctrl+u: 删除光标至命令行首的内容
Ctrl+k: 删除光标至命令行尾的内容
Ctrl+l: 清屏
Ctrl+d: 向后删除一个字符
</pre>
<h6>命令历史：</h6>
<pre>
查看命令历史：history
-c：清空命令历史
-d OFFSET [n]: 删除指定位置的命令
-w：保存命令历史至历史文件中

// 执行history中制定行号的命令,感叹号
!890
// 执行倒数第四条命令
!-4
// 执行上一条命令
!!
// !+ 字符串，执行命令历史中最近一个指定字符串开头的命令
!ls
// 引用前一个命令的最后一个参数
cat /etc/httpd/conf/http.conf
vim !$
// 获取钱一个命令的最后一个参数到终端
按 ESC 然后按 .
cat /etc/httpd/conf/httpd.conf
vim 按 ESC 然后按 
</pre>
<h6>环境变量</h6>
<pre>
echo $HISTSIZE
echo $PATH
</pre>
</section>
<section class="cmd-description grid-item">
    <h4><a name="命令替换" href="#命令替换">命令替换</a></h4>
<pre>
bash支持的引号：
``: 命令替换
"": 弱引用，可以实现变量替换
'': 强引用，不完成变量替换
</pre>
<H6>$(COMMAND)</H6>
<pre class="prettyprint lang-php">
echo "current path is $(pwd)"
// current path is /etc/httpd/conf
touch ./file-$(date +%F).txt
</pre>
<h6>反引号命令替换`COMMAND`</h6>
echo "current path is `pwd`"
</section>
<section class="cmd-description grid-item">
    <h4><a name="通配符" href="#通配符">通配符</a></h4>
    <h6>man 7 glob</h6>
<pre class="prettyprint lang-php">
*: 任意长度的任意字符
?：任意单个字符
[]：匹配指定范围内的任意单个字符
[abc], [a-m], [a-z], [A-Z], [0-9], [a-zA-Z], [0-9a-zA-Z]
[:space:]：空白字符
[:punct:]：标点符号
[:lower:]：小写字母
[:upper:]: 大写字母
[:alpha:]: 大小写字母
[:digit:]: 数字
[:alnum:]: 数字和大小写字母
    
# man 7 glob
[^]: 匹配指定范围之外的任意单个字符
// 字母开头中间有空格非字母结尾
ls [[:alpha:]]*[[:space:]]*[^[:alpha:]]
</pre>
</section>
<section class="cmd-description grid-item">
    <h4><a name="grep" href="#grep">grep</a></h4>
    <h6>内容查找</h6>
<pre class="prettyprint lang-php">
// 忽略大小写递归查找文本内容vhost*, 显示匹配的文件，以及内容所在行号
grep -rin vhost* .
</pre>
<h6>忽略空行和注释</h6>
<pre>
egrep -v "#|^&" /etc/httpd/conf/http.conf
cat /etc/httpd/conf/http.conf | egrep -v "#|^$"
</pre>
</section>


<section class="cmd-description grid-item">
    <h4><a name="权限管理" href="#权限管理">权限管理</a></h4>
<pre class="prettyprint lang-php">
权限：
r, w, x

文件：
r：可读，可以使用类似cat等命令查看文件内容；
w：可写，可以编辑或删除此文件；
x: 可执行，eXacutable，可以命令提示符下当作命令提交给内核运行；

目录：
r: 可以对此目录执行ls以列出内部的所有文件；
w: 可以在此目录创建文件；
x: 可以使用cd切换进此目录，也可以使用ls -l查看内部文件的详细信息；

rwx:
r--:只读
r-x:读和执行
---：无权限
</pre>
<h6>特殊文件</h6>
<pre>
// 理论上任何人都可以查看passwd
用户：UID, /etc/passwd
-rw-r--r-- 1 root root 2109 Apr  6  2017 /etc/passwd
组：GID, /etc/group

// 事实上，用户信息保存在passwd，密码用x代替，保存在shadow
影子口令：
用户：/etc/shadow
-rw-r----- 1 root shadow 1217 Apr  6  2017 /etc/shadow
组：/etc/gshadow
用户类别：
管理员：0
普通用户： 1-65535
    系统用户：1-499
    一般用户：500-60000

man 5 passwd
account: 登录名
password: 密码
UID：
GID：基本组ID
comment: 注释
HOME DIR：家目录
SHELL：用户的默认shell

cat /etc/shells 登录可用安全shell
# /etc/shells: valid login shells
/bin/sh
/bin/dash
/bin/bash
/bin/rbash
/usr/bin/tmux
/usr/bin/screen

/etc/shadow
account: 登录名
encrypted password: 加密的密码

用户组类别：
私有组：创建用户时，如果没有为其指定所属的组，系统会自动为其创建一个与用户名同名的组
基本组：用户的默认组
附加组，额外组：默认组以外的其它组

加密方法：
对称加密：加密和解密使用同一个密码，速度是公钥1000倍，效率快
公钥加密（非对称加密）：每个密码都成对儿出现，一个为私钥(secret key)，一个为公钥(public key)
单向加密(指纹加密)，散列加密：提取数据特征码，常用于数据完整性校验
    1、雪崩效应
    2、定长输出
        MD5：Message Digest, 信息摘要,128位定长输出
        SHA1：Secure Hash Algorithm, 160位定长输出


</pre>
<h6>md5加密</h6>
<pre>
md5sum /etc/inittab
753a386bcd9ab0ca581056348463891e  inittab
</pre>

</section>

<section class="cmd-description grid-item">
    <h4><a name="用户管理" href="#用户管理">*用户管理</a></h4>
<h6>添加用户</h6>
<pre>
// 添加一个用户，默认地添加到tom组
useradd tom
// 查看密码
cat /etc/shadow | grep tom
// tom:!!:17470:0:99999:7:::
// 可以看见是没有密码的，添加一个密码
passwd tom
// 查看密码和私有组
cat /etc/shadow /etc/group | grep tom

为什么会有默认值？
// 查看模板
vim /etc/default/useradd
# useradd defaults file
GROUP=100
HOME=/home
INACTIVE=-1 #密码过期可宽限天数
EXPIRE=     #没指定永不过期
SHELL=/bin/bash
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes

// 基本查看useradd
which useradd
ll $(which useradd)
ll `which useradd`
// 别名adduser
ll `which adduser`
lrwxrwxrwx. 1 root root 7  8月 17 2015 /usr/sbin/adduser -> useradd
</pre>
<h6>修改密码</h6>
<pre>
passwd tom
</pre>
<h6>添加组</h6>
<pre>
groupadd mygroup
</pre>
</section>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script src="assets/js2/jquery.js"></script>
<script src="assets/js2/jquery.highlight-4.js"></script>
<script src="assets/js2/google-code-prettify/prettify.js"></script>
<script src="assets/js2/foundation.min.js"></script>
<script src="assets/js2/masonry.js"></script>
<script src="assets/js2/app.js"></script>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'gaTrackingID', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>
